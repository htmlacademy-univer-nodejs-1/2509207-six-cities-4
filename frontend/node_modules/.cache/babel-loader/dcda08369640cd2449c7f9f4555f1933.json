{"ast":null,"code":"var _jsxFileName = \"/Users/vovotata/nodejs/2509207-six-cities-4/frontend/src/components/location-picker/location-picker.tsx\",\n    _s = $RefreshSig$();\n\nimport { Icon, Marker } from 'leaflet';\nimport { useRef, useEffect } from 'react';\nimport { URL_MARKER_DEFAULT, ZOOM } from '../../const';\nimport useMap from '../../hooks/useMap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst customIcon = new Icon({\n  iconUrl: URL_MARKER_DEFAULT,\n  iconSize: [40, 40],\n  iconAnchor: [20, 40]\n});\n\nconst LocationPicker = _ref => {\n  _s();\n\n  let {\n    city,\n    onChange,\n    location\n  } = _ref;\n  const mapRef = useRef(null);\n  const map = useMap(mapRef, city);\n  useEffect(() => {\n    let marker;\n\n    if (map) {\n      map.setView({\n        lat: location.latitude,\n        lng: location.longitude\n      }, ZOOM);\n      marker = new Marker({\n        lat: location.latitude,\n        lng: location.longitude\n      }, {\n        draggable: true,\n        icon: customIcon\n      });\n      marker.on('moveend', evt => {\n        onChange(evt.target.getLatLng());\n      });\n      marker.addTo(map);\n    }\n\n    return () => {\n      if (map) {\n        map.removeLayer(marker);\n      }\n    };\n  }, [map, location, onChange]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"location-picker__map\",\n    ref: mapRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 10\n  }, this);\n};\n\n_s(LocationPicker, \"5vFIHA1c6X7IDKKBLe6xFlu/6wA=\", false, function () {\n  return [useMap];\n});\n\n_c = LocationPicker;\nexport default LocationPicker;\n\nvar _c;\n\n$RefreshReg$(_c, \"LocationPicker\");","map":{"version":3,"names":["Icon","Marker","useRef","useEffect","URL_MARKER_DEFAULT","ZOOM","useMap","customIcon","iconUrl","iconSize","iconAnchor","LocationPicker","city","onChange","location","mapRef","map","marker","setView","lat","latitude","lng","longitude","draggable","icon","on","evt","target","getLatLng","addTo","removeLayer"],"sources":["/Users/vovotata/nodejs/2509207-six-cities-4/frontend/src/components/location-picker/location-picker.tsx"],"sourcesContent":["import { Icon, Marker } from 'leaflet';\nimport { useRef, useEffect } from 'react';\n\nimport type { City, Location } from '../../types/types';\n\nimport { URL_MARKER_DEFAULT, ZOOM } from '../../const';\nimport useMap from '../../hooks/useMap';\n\ntype LocationPickerProps = {\n  city: City;\n  onChange: ({ lat, lng }: { lat: number; lng: number }) => void;\n  location: Location;\n};\n\nconst customIcon = new Icon({\n  iconUrl: URL_MARKER_DEFAULT,\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\nconst LocationPicker = ({ city, onChange, location }: LocationPickerProps) => {\n  const mapRef = useRef<HTMLElement | null>(null);\n  const map = useMap(mapRef, city);\n\n  useEffect(() => {\n    let marker: Marker;\n    if (map) {\n      map.setView(\n        {\n          lat: location.latitude,\n          lng: location.longitude,\n        },\n        ZOOM\n      );\n\n      marker = new Marker(\n        {\n          lat: location.latitude,\n          lng: location.longitude,\n        },\n        {\n          draggable: true,\n          icon: customIcon,\n        }\n      );\n\n      marker.on('moveend', (evt) => {\n        onChange(evt.target.getLatLng());\n      });\n\n      marker.addTo(map);\n    }\n\n    return () => {\n      if (map) {\n        map.removeLayer(marker);\n      }\n    };\n  }, [map, location, onChange]);\n\n  return <section className=\"location-picker__map\" ref={mapRef}></section>;\n};\n\nexport default LocationPicker;\n"],"mappings":";;;AAAA,SAASA,IAAT,EAAeC,MAAf,QAA6B,SAA7B;AACA,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,OAAlC;AAIA,SAASC,kBAAT,EAA6BC,IAA7B,QAAyC,aAAzC;AACA,OAAOC,MAAP,MAAmB,oBAAnB;;AAQA,MAAMC,UAAU,GAAG,IAAIP,IAAJ,CAAS;EAC1BQ,OAAO,EAAEJ,kBADiB;EAE1BK,QAAQ,EAAE,CAAC,EAAD,EAAK,EAAL,CAFgB;EAG1BC,UAAU,EAAE,CAAC,EAAD,EAAK,EAAL;AAHc,CAAT,CAAnB;;AAMA,MAAMC,cAAc,GAAG,QAAuD;EAAA;;EAAA,IAAtD;IAAEC,IAAF;IAAQC,QAAR;IAAkBC;EAAlB,CAAsD;EAC5E,MAAMC,MAAM,GAAGb,MAAM,CAAqB,IAArB,CAArB;EACA,MAAMc,GAAG,GAAGV,MAAM,CAACS,MAAD,EAASH,IAAT,CAAlB;EAEAT,SAAS,CAAC,MAAM;IACd,IAAIc,MAAJ;;IACA,IAAID,GAAJ,EAAS;MACPA,GAAG,CAACE,OAAJ,CACE;QACEC,GAAG,EAAEL,QAAQ,CAACM,QADhB;QAEEC,GAAG,EAAEP,QAAQ,CAACQ;MAFhB,CADF,EAKEjB,IALF;MAQAY,MAAM,GAAG,IAAIhB,MAAJ,CACP;QACEkB,GAAG,EAAEL,QAAQ,CAACM,QADhB;QAEEC,GAAG,EAAEP,QAAQ,CAACQ;MAFhB,CADO,EAKP;QACEC,SAAS,EAAE,IADb;QAEEC,IAAI,EAAEjB;MAFR,CALO,CAAT;MAWAU,MAAM,CAACQ,EAAP,CAAU,SAAV,EAAsBC,GAAD,IAAS;QAC5Bb,QAAQ,CAACa,GAAG,CAACC,MAAJ,CAAWC,SAAX,EAAD,CAAR;MACD,CAFD;MAIAX,MAAM,CAACY,KAAP,CAAab,GAAb;IACD;;IAED,OAAO,MAAM;MACX,IAAIA,GAAJ,EAAS;QACPA,GAAG,CAACc,WAAJ,CAAgBb,MAAhB;MACD;IACF,CAJD;EAKD,CAlCQ,EAkCN,CAACD,GAAD,EAAMF,QAAN,EAAgBD,QAAhB,CAlCM,CAAT;EAoCA,oBAAO;IAAS,SAAS,EAAC,sBAAnB;IAA0C,GAAG,EAAEE;EAA/C;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CAzCD;;GAAMJ,c;UAEQL,M;;;KAFRK,c;AA2CN,eAAeA,cAAf"},"metadata":{},"sourceType":"module"}